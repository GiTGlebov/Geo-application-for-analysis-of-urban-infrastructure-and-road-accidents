# GeoData Explorer — Интерактивное геоприложение

## Описание проекта
веб‑приложение для визуализации и анализа пространственных данных на карте.
Проект позволяет отображать различные городские датасеты (Wi‑Fi точки, велоинфраструктуру, ДТП) в виде:
- heatmap (тепловых карт),
- интерактивных точек с описанием.


---

## Функциональность
- Загрузка и отображение нескольких геодатасетов
- Ограничение количества точек для производительности
- Heatmap + кликабельные точки
- REST API для получения данных
- Предобработка и очистка исходных данных

---

## Используемые технологии
- **Python 3**
- **Flask** — backend и API
- **CSV / JSON** — формат хранения данных
- **Leaflet.js** — интерактивная карта (frontend)
- **Pandas** — подготовка и нормализация данных

---

## Структура проекта
```
project/
├── app.py                  # Flask Приложение
├── data/
│   ├── wifi.csv
│   ├── bicycle.csv
│   ├── accidents_msk_clean.csv
│   ├── accidents_spb_clean.csv
│   └── accidents_mo_clean.csv
├── prepare_accidents.py    # Конвертация GeoJSON в CSV
├── clean_csv.py            # Очистка ДТП по bbox регионов
├── normalize_data.py       # Нормализация WiFi и Bicycle датасетов
├── templates/
│   └── index.html          # HTML с картой
└── README.md
```

---

## Датасеты
В проекте используются следующие наборы данных:
- **WiFi** — точки доступа
- **Bicycle** — велоинфраструктура
- **Accidents (MSK / SPB / MO)** — дорожно‑транспортные происшествия

Для ДТП используется вес (`value`), учитывающий:
- тяжесть происшествия,
- количество погибших,
- количество раненых.

---

## API
### Получение данных
```
GET /api/data/<dataset>
```

Пример:
```
/api/data/accidents_spb
```

Ответ:
```json
{
  "heat": [[lat, lon, value], ...],
  "points": [
    {"lat": 55.7, "lon": 37.6, "name": "...", "value": 3}
  ]
}
```

---

## Запуск проекта

### 1. Установка зависимостей
```bash
pip install flask pandas
```

### 2. Подготовка данных (один раз)
```bash
python prepare_accidents.py
python clean_csv.py
python normalize_data.py
```

### 3. Запуск сервера
```bash
python app.py
```

После запуска приложение будет доступно по адресу:
```
http://127.0.0.1:5000
```

---

## Возможные улучшения
- Безопасный маршрут между двумя точками (граф + веса ДТП)
- Фильтрация по типам ДТП
- Временной анализ (по годам / сезонам)
- Подключение PostGIS или ClickHouse
- Кластеризация точек
- Экспорт данных

---